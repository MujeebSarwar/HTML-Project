(()=>{"use strict";const t=(t,e,o)=>{const n=o=>String.prototype.split.call(e,o).filter(Boolean).reduce(((t,e)=>null!=t?t[e]:t),t),i=n(/[,[\]]+?/)||n(/[,[\].]+?/);return void 0===i||i===t?o:i},e=t=>!(!t||"string"!=typeof t)&&(-1!==t.indexOf("cart/add")||-1!==t.indexOf("cart/change")),o=()=>{let e=t(window,"Shopify.shop.permanent_domain")||t(window,"Shopify.shop")||t(window,"CHDataObject.store_urls.store_url")||t(window,"Klickly_BoldCommerce.shop");if((!e||"string"!=typeof e)&&document.currentScript.src){e=new URL(document.currentScript.src).searchParams.get("shop")}return e},n=()=>t(window,"meta.product.id"),i=async()=>{const t=new Set,e=[],o=document.querySelectorAll("script[src*=googletagmanager]"),n=(t,e)=>new Promise((o=>{gtag("get",t,e,o)}));for(const e of o){const o=e.getAttribute("src"),n=new URLSearchParams(o.split("?")[1]).get("id");n&&n.startsWith("G-")&&t.add(n)}const i=Array.from(t);if(i.length){if(!window.gtag)return function(t){const e=[],o=function(){const t=document.cookie.split(";").find((t=>t.trim().startsWith("_ga=")));if(t){const e=t.split(".");return e.length>2?e[2]+"."+e[3]:null}return null}();return t.forEach((t=>{const n=function(t){const e=`; ${document.cookie}`.split(`; ${t}=`);return 2===e.length?e.pop().split(";").shift():null}(`_ga_${t.replace("G-","")}`);if(n){const i=n.split(".");if(i.length>3){const n=i[2];e.push({shopMeasurementId:t,gaClientId:o,gaSessionId:n})}}})),e}(i);for(const t of i){const o=await n(t,"session_id"),i=await n(t,"client_id");o&&i&&e.push({gaClientId:i,gaSessionId:o,shopMeasurementId:t})}}return e};const c={deserialize(t){const e={};return t.replace(/([^=]*)=([^&]*)&*/g,((t,o,n)=>{e[o]=encodeURIComponent(n)})),e}};function r(t){const e=("https:"==document.location.protocol?"https://":"http://")+"pixel.sitescout.com/iap/"+t;(new Image).src=e,function(t){var e=("https:"==document.location.protocol?"https://":"http://")+"pixel.sitescout.com/dmp/asyncPixelSync",o=t.createElement("iframe");(o.frameElement||o).style.cssText="width: 0; height: 0; border: 0; display:none;",o.src="javascript:false",t.body.appendChild(o);var n=o.contentWindow.document;n.open().write("<body onload=\"window.location.href='"+e+"'\">"),n.close()}(document)}const{SCRIPT_TAG_GTM_ID:s}={NODE_ENV:"production",TRACK_URL:"https://kst.klickly.com",TRACK_API_URL:"https://dl-api.klickly.com",EXTERNAL_CHECKOUT_API:"https://external-checkout-api.klickly.com",PIXEL_SCRIPT_URL:"https://analytics.klickly.com/pixel.js?v=1.4.0",SCRIPT_TAG_DOMAIN_FILTER_LIST:"",SCRIPT_TAG_GTM_ID:"GTM-NMDRPTH",ANALYTICS_API_URL:"https://analytics-api.klickly.com",DISABLE_SESSION_PURCHASE_EVENT:1,WIDGET_PROMOTIONS_API:"https://widget-promotions-api.klickly.com",LIVERAMP_PIXEL_ID:711880};let a=!1;const{WIDGET_PROMOTIONS_API:l,ANALYTICS_API_URL:d}={NODE_ENV:"production",TRACK_URL:"https://kst.klickly.com",TRACK_API_URL:"https://dl-api.klickly.com",EXTERNAL_CHECKOUT_API:"https://external-checkout-api.klickly.com",PIXEL_SCRIPT_URL:"https://analytics.klickly.com/pixel.js?v=1.4.0",SCRIPT_TAG_DOMAIN_FILTER_LIST:"",SCRIPT_TAG_GTM_ID:"GTM-NMDRPTH",ANALYTICS_API_URL:"https://analytics-api.klickly.com",DISABLE_SESSION_PURCHASE_EVENT:1,WIDGET_PROMOTIONS_API:"https://widget-promotions-api.klickly.com",LIVERAMP_PIXEL_ID:711880},p=t=>{try{return JSON.parse(t.response)}catch(e){return t.response}},h=({baseURL:t,withCredentials:e=!0,httpMethod:o="POST"})=>(n,i)=>{const c=new XMLHttpRequest;return c.withCredentials=e,c.open(o,`${t}${n}`,!0),c.setRequestHeader("Content-Type","application/json"),c.send(JSON.stringify(i)),new Promise(((t,e)=>{c.onreadystatechange=()=>{4===c.readyState&&(c.status>=200&&c.status<300?t({data:p(c)}):e(c.statusText))}}))},u=h({baseURL:l,httpMethod:"GET"}),_=h({baseURL:window.location.origin,httpMethod:"GET"}),m=h({baseURL:d,httpMethod:"GET"});class w{static get(t){let e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}static set(t,e,o={}){if((o={path:"/",secure:!0,sameSite:"none",...o}).expires)o.expires instanceof Date&&(o.expires=o.expires.toUTCString());else{const t=new Date;t.setDate(t.getDate()+365),o.expires=t.toUTCString()}let n=encodeURIComponent(t)+"="+encodeURIComponent(e);for(let t in o){n+="; "+t;let e=o[t];!0!==e&&(n+="="+e)}document.cookie=n}static remove(t){w.set(t,"",{expires:new Date(0)})}}class y{static get(t){try{return localStorage.getItem(t)}catch(t){return}}static set(t,e){try{return localStorage.setItem(t,e),y.get(t)===e}catch(t){return!1}}static remove(t){try{localStorage.removeItem(t)}catch(t){return!1}}}class k{static get(t){try{return sessionStorage.getItem(t)}catch(t){return}}static set(t,e){try{return sessionStorage.setItem(t,e),k.get(t)===e}catch(t){return!1}}static remove(t){try{sessionStorage.removeItem(t)}catch(t){return!1}}}const g=[w,y,k];class I{static get(t){let e;for(let o=0;o<g.length&&(e=g[o].get(t),!e);o++);return e}static set(t,e){for(let o=0;o<g.length;o++)g[o].set(t,e)}static remove(t){for(let e=0;e<g.length;e++)g[e].remove(t)}}const f=document.currentScript?document.currentScript.src:"",S=f&&"string"==typeof f?c.deserialize(f.slice(f.indexOf("?")+1)):{};S.gtm_enabled&&(()=>{if(!s)return;a=!0;const t=document.createElement("script");t.type="text/javascript",t.async=!0,t.text=`(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n    })(window,document,'script','dataLayer','${s}');`,document.head.appendChild(t),window.dataLayer=window.dataLayer||[]})();const{SCRIPT_TAG_DOMAIN_FILTER_LIST:T,DISABLE_SESSION_PURCHASE_EVENT:E,LIVERAMP_PIXEL_ID:R}={NODE_ENV:"production",TRACK_URL:"https://kst.klickly.com",TRACK_API_URL:"https://dl-api.klickly.com",EXTERNAL_CHECKOUT_API:"https://external-checkout-api.klickly.com",PIXEL_SCRIPT_URL:"https://analytics.klickly.com/pixel.js?v=1.4.0",SCRIPT_TAG_DOMAIN_FILTER_LIST:"",SCRIPT_TAG_GTM_ID:"GTM-NMDRPTH",ANALYTICS_API_URL:"https://analytics-api.klickly.com",DISABLE_SESSION_PURCHASE_EVENT:1,WIDGET_PROMOTIONS_API:"https://widget-promotions-api.klickly.com",LIVERAMP_PIXEL_ID:711880},A=T?T.split(","):[],L=o(),P=A.includes(L),C={shopDomain:L,externalId:n(),checkout:(()=>{let e;return window.chData&&window.chData.order?(e={order_id:Number(window.chData.order.order_id)||null},e.referrer=document.location.host||""):window.Klickly_BoldCommerce&&window.Klickly_BoldCommerce.order_name?e={order_name:window.Klickly_BoldCommerce.order_name}:window.Klickly_Zipify&&window.Klickly_Zipify.order_id?e={order_id:Number(window.Klickly_Zipify.order_id)}:window.Klickly_Recharge&&window.Klickly_Recharge.order_id?e={order_id:Number(window.Klickly_Recharge.order_id)}:window.Klickly_Partially&&window.Klickly_Partially.checkout?e=window.Klickly_Partially.checkout:window.Shopify&&window.Shopify.checkout&&(e=t(window,"Shopify.checkout",{}),e.referrer=t(document,"location.host",""),e.customer=t(window,"Shopify.Checkout.customer"),e.geolocatedAddress=t(window,"Shopify.Checkout.geolocatedAddress",""),"string"==typeof e.order_id&&(e.order_id=Number(e.order_id))),e})()};S.account_id&&(C.accountId=S.account_id);const x=window.navigator?.userAgentData||{},N=x.brands?.map((t=>t.brand)).filter(Boolean)||[],D=N.includes("Chromium")&&N.includes("Lighthouse");function v(){if(!P)return _("/cart.js").then((({data:t})=>{window.klpixel&&window.klpixel("event","cartChanged",{cart:t})}))}if(L){!async function(){if(P)return!1;let e="visit";var o;"/cart"===t(window,"location.pathname","")&&(e="cart"),C.checkout&&(e="checkout"),function(t,e){const o=(S[`b_type_${e}`]||"").split(",").filter((t=>!!t));if(!o.length)return u(`/ads/tags?shopDomain=${t}&audienceAction=${e}`,{}).then((({data:t=[]})=>{t.forEach((t=>{r(t)}))}));o.forEach((t=>{r(t)}))}(L,e),o={event:"klicklyDataPush",klickly_event_name:e,klickly_cid:I.get("_klpixel_cid"),klickly_shop:L.replace(".myshopify.com",""),klickly_product:C.externalId||null},a&&window.dataLayer.push(o)}(),function(t){return"1"===S.tw||"1"===S.ga4?m(`/pixels?shop_domain=${t}`).then((({data:t})=>t.pixels)):Promise.resolve([])}(L).then((t=>{t.forEach((t=>{const e=`${t.name}_t`;!C.checkout&&(t=>{const e=t-Date.now();return!t||"number"!=typeof e||Math.floor(e/36e5)>24})(I.get(e))&&(((t={})=>{const e=document.createElement("iframe");Object.assign(e,t),e.style.display="none",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.width="0",e.style.height="0",e.style.border="none",e.style.overflow="hidden",e.style.zIndex="-1",e.style.visibility="hidden",e.style.opacity="0",e.style.pointerEvents="none",document.body.appendChild(e)})({id:`kl_${t.name}_iframe`,src:t.src}),I.set(e,Date.now()))}))})).catch((()=>null)),D||async function(t){((t,e,o,n)=>{if(t[n])return;const i=t[n]=function(){i.track&&i.ready?i.track.apply(i,arguments):i.queue.push(arguments)};i.queue=[];const c=e.createElement("script");c.id="klpixel-script",c.async=!0,c.src=o;const r=e.getElementsByTagName("script")[0];r.parentNode.insertBefore(c,r)})(window,document,"https://analytics.klickly.com/pixel.js?v=1.4.0","klpixel"),window.klpixel("init","shopify.shop"),window.klpixel("config","listeners",{change:!1,click:Boolean(t.externalId),scroll:!1,popstate:!1,mouseover:!1,visibilitychange:!1}),window.klpixel("fetch_cookie");const e=await i(),c={...t,ga:e};window.klpixel("meta","shop",c),window.klpixel("ttd_event",{shop_domain:o(),product_id:n()}),t.checkout?window.klpixel("event","purchase"):window.klpixel("event","pageView")}({...C,eventName:void 0}),C.checkout&&I.remove("tw_t");const c=new URL(window.location);if(c.searchParams.get("klgooglecpc")&&window.klpixel){if(window.klpixel("event","click",[{google_cpc:{promotion:{accountId:C.accountId}}}],{id:"klickly.google_cpc",sendImmediately:!0,omitMetaFields:["shop"]}),R){const t={action:"click",account:C.accountId,shopDomain:L},e={platform:"klickly",source:"google_cpc",events:[JSON.stringify(t)]},o=new Image,n=btoa(JSON.stringify(e));o.src=`https://id.rlcdn.com/${R}.gif?cparams=${n}`}c.searchParams.delete("klcpc"),window.history.replaceState(history.state,"",c.href)}const s=XMLHttpRequest.prototype.open,l=window.fetch;window.fetch=function(){return l.apply(this,arguments).then((t=>(t.ok&&e(arguments[0])&&v(),t)))},XMLHttpRequest.prototype.open=function(){this.addEventListener("load",(function(){200===this.status&&e(this.responseURL)&&v()})),s.apply(this,arguments)}}P||D||r("357c6e9d4d9b263b")})();